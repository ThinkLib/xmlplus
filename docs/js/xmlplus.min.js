!function(e,t){"use strict";function n(e,t){var n={typ:0,elem:G.elem,uid:V.guid()};return n.appendTo=G.appendTo,n}function r(e,t){var n={typ:1,elem:G.elem,uid:V.guid(),appendTo:G.appendTo};return n.fdr=c(n),n.back=G.build(n,T),n}function i(){function e(e,t,n){var i=t.nodeType,a=(r[i]||(r[i]=[])).pop()||ne(t,n);return a.ele.textContent=t.textContent,a.env=e,a.node=t,t.uid=a.uid,n.appendChild(a.ele),R[a.uid]=a}function t(e){delete R[e.uid],r[e.typ].push(e)}function n(e,t){t.env=e}var r={};return{create:e,recycle:t,chenv:n}}function a(){function e(e,t,r){var a=t.nodeName,o=(i[a]||(i[a]=[])).pop()||n(t,r);return t.defer||u(e,t),o.ele=G.createElement(t,r),o.api=t.defer?G.build(o,K):o.back,o.ctr=e.ctr,o.env=e,o.node=t,t.uid=o.uid,o.data={},o.ele.xmlTarget=o,R[o.uid]=o}function t(e){for(var t,n=0,r=C.select("./*",e.node);n<r.length;n++)t=R[r[n].uid],M[t.typ].recycle(t);delete R[e.uid],e.ctr.remove(e),e.env.smr.remove(e),W.remove(e),i[e.node.nodeName].push(e)}function r(e,t){for(var n,r=0,i=t.node.childNodes;r<i.length;r++)n=R[i[r].uid],M[n.typ].chenv(e,n);t.env=e,t.ctr=e.ctr}var i={};return{create:e,recycle:t,chenv:r}}function o(e,t){var n=t.env.share[t.dir+"/"+t.node.localName];return n?n.ins?(t.xml.replaceChild(x.createElement("void"),t.xml.lastChild),t.api=G.build(t,te),n.copys.push(t),t.fun=function(){return n.ins.value}):(t.api=G.build(t,ee),n.ins=t,n.copys=[]):t.api=t.back,t}function s(){function e(e,t,n){var a=G.component(e.dir,t);if(a){var s=i.pop()||r(t,n);return s.map=V.extend(!0,{},a.map),s.opt=V.extend(!0,{},a.opt),s.cfg=V.extend(!0,{},a.cfg),s.ctr=s.map.msgscope?U():e.ctr,s.dir=a.dir,s.css=a.css,s.ali=a.ali,s.fun=a.fun,s.cid=a.cid,s.the=a.the,s.smr=e.smr,s.env=e,s.node=t,s.aid=e.aid,t.uid=s.uid,s.data={},u(e,t),f(e,t),p(e,s),s.share=V.extend({},e.share),s.map.share.forEach(function(e){var t=Y.fullPath(s.dir,e),n=Y.split(t);B[n.dir]&&B[n.dir][n.basename]?s.share[t]={}:V.error("shared object "+t+" not found")}),s.xml=a.xml.cloneNode(!0),R[s.uid]=o(e,s)}}function t(e){for(var t,n=0,r=C.select("./*",e.node),a=R[e.xml.lastChild.uid];n<r.length;n++)t=R[r[n].uid],M[t.typ].recycle(t);M[a.typ].recycle(a),delete R[e.uid],e.ctr.remove(e),e.smr.remove(e),W.remove(e),i.push(e)}function n(e,t){for(var n,r=0,i=t.node.childNodes;r<i.length;r++)n=R[i[r].uid],M[n.typ].chenv(e,n);t.env=e,t.msgscope||(t.ctr=e.ctr)}var i=[];return{create:e,recycle:t,chenv:n}}function l(){function e(e){var t,n=F[e.dir.split("/")[0]][c],r=e.aid+e.cid,i=e.css.replace(E,"."+r).replace(/\$/gi,r);return n&&e.the&&e.the.forEach(function(e){t=n[e.replace(/%/g,"")],t&&(i=i.replace(e,t))}),i}function n(t){var n=b.createElement("style");return n.appendChild(b.createTextNode(e(t))),d.appendChild(n)}function r(e,t){for(var n=e.getAttribute("class"),r=t.split(/\s+/),i=n?n.split(/\s+/):[],a=0;a<r.length;a++)i.indexOf(r[a])<0&&i.push(r[a]);e.setAttribute("class",i.join(" "))}function i(e){var t=e.env.aid+e.cid;l[t]?l[t].count++:e.css&&(l[t]={count:1,style:n(e),ins:e});var i=e.node.getAttribute("id");i&&e.env.css.indexOf("#"+i)!=-1&&r(e.elem(),e.env.aid+e.env.cid+i)}function a(e){var t=e.env.aid+e.cid,n=l[t];n&&0==--n.count&&(d.removeChild(n.style),delete l[t])}function o(n){if(n==t)return c;"string"!=typeof n&&V.error("invalid theme, excepted a string"),c=n;for(var r in l)F[l[r].ins.root][c]&&(l[r].style.innerHTML=e(l[r].ins));return this}function s(){var e,t=[],n=d.childNodes;for(e=0;e<n.length;e++)1==n[e].nodeType&&t.push(n[e].textContent);return t.join("")}var l={},c="default",d=b.body?b.getElementsByTagName("head")[0]:b.createElement("void");return{create:i,remove:a,theme:o,style:s}}function c(n){function r(e,r){return"string"!=typeof e&&V.error("invalid expression, expected a css selector"),r==t?n.xml:V.isInnerObject(r)?R[r.guid()].node:void V.error("invalid context, expected a InnerObject")}function i(e,t){for(var t=r(e,t),n=new H,i=C.select(e,t),a=0;a<i.length;a++)n.push(G.create(R[i[a].uid]).api);return n}function a(e,t){for(var t=r(e,t),n=new H,i=C.select(e,t),a=0;a<i.length;a++)n.push(R[i[a].uid].value);return n}function o(){var t,r,o,s,l=e?n.xml.querySelectorAll("*[id]"):C.select("//*[@id]",n.xml);for(t in a)delete i[t],delete a[t];for(t in n.ali){for(i[t]=i(n.ali[t]),a[t]=new H,r=0;r<i[t].length;r++)a[t].push(i[t][r].value());i[t].call("addClass",n.aid+n.cid+t)}for(t=0;t<l.length;t++)o=l[t].getAttribute("id"),s=G.create(R[l[t].uid]),i[o]=s.api,a[o]=s.value}return{sys:i,items:a,refresh:o}}function d(e,t){var n,r,i=-1,a=t;for(r in e.ali)if(n=e.map.defer.indexOf(r),n!=-1&&G.nodeIsMatch(e.xml,e.ali[r],a)){i=n;break}var o=a.getAttribute("id");return(i!=-1||o&&e.map.defer.indexOf(o)!=-1)&&(a=x.createElement("void"),o&&a.setAttribute("id",o),t.parentNode.replaceChild(a,t),a.defer=t),a}function u(e,t){var n,r={},i=t.getAttribute("id");for(n in e.ali)G.nodeIsMatch(e.xml,e.ali[n],t)&&V.extend(r,e.map.attrs[n]);i&&e.map.attrs[i]&&(r=V.extend(r,e.map.attrs[i]));for(n in r)null!=e.opt[n]&&t.setAttribute(r[n],e.opt[n])}function f(e,t){var n,r={},i=t.getAttribute("id");for(n in e.ali)G.nodeIsMatch(e.xml,e.ali[n],t)&&V.extend(r,e.map.cfgs[n]);i&&e.map.cfgs[i]&&(r=V.extend(r,e.map.cfgs[i]));for(n in r)e.cfg[i]=e.cfg[i]||{},null!=e.opt[n]&&(e.cfg[i][r[n]]=e.opt[n])}function p(e,t){var n,r,i,a,o=t.node.getAttribute("id");for(r in e.ali)G.nodeIsMatch(e.xml,e.ali[r],t.node)&&V.extend(t.opt,e.cfg[r]);for(o&&e.cfg[o]&&V.extend(t.opt,e.cfg[o]),n=0;n<t.node.attributes.length;n++)i=t.node.attributes[n],i.prefix||(t.opt[i.name]=i.value);for(n in t.map.format)for(a=t.map.format[n],r=0;r<a.length;r++)i=t.opt[a[r]],i&&(t.opt[a[r]]=P[n](i))}function h(t,n,r){function i(n,r){if(n.nodeType>1){if(M[n.nodeType])return M[n.nodeType].create(t,n,r);V.error("create failed, invalid node")}var a,o,s,n=n.loaded?n:d(t,n);if(k[n.nodeName]){for(o=M[0].create(t,n,r),a=0;a<n.childNodes.length;a++)i(n.childNodes[a],o.ele);t.smr.create(o)}else if(o=M[1].create(t,n,r)){s=o.map.nofragment&&e?b.body:r,h(o,s,o.xml.lastChild),o.fdr.refresh();var l=o.appendTo();for(a=0;a<n.childNodes.length;a++)i(n.childNodes[a],l);t.smr.create(o),o.value=o.fun.apply(o.api,[o.fdr.sys,o.fdr.items,o.opt]),o.map.nofragment&&e&&r.appendChild(b.body.lastChild)}else{for(console.warn(V.serialize(n)+" not found"),o=M[0].create(t,n,r),a=0;a<n.childNodes.length;a++)i(n.childNodes[a],o.ele);t.smr.create(o)}return o}return i(r,n)}function m(e,t){function n(n){return V.isPlainObject(n)||V.error("invalid target, expected a plainObject"),F[e][t]=V.extend(F[e][t],n),this}return{imports:n}}function v(e,t){function n(e){V.isPlainObject(e)||V.error("invalid components, expected a plainObject");for(var n in e){var r=e[n].map,i=n.toLowerCase();D[t][i]=e[n],r&&r.extend&&"string"==V.type(r.extend.from)?z.push({name:i,space:t,src:e[n]}):G.imports(e[n],i,t)}return[].slice.call(z).forEach(function(e){var t=G.source(e.space,e.src.map.extend.from);t&&(z.splice(z.indexOf(e),1),G.imports(G.extend(e.src,t),e.name,e.space))}),this}return B[t]||(X[t]={},B[t]={},D[t]={}),{imports:n}}function g(e,t){function n(t){return"string"!=V.type(t)&&null!=t&&V.error("invalid namespace, expected a null value or a string"),v(e,t?e+"/"+t:e)}function r(t){return F[e][t]=F[e][t]||{},m(e,t)}return("string"!=V.type(e)||e.indexOf("/")>-1)&&V.error("invalid root, expected a string"),V.isFunction(t)||V.error("invalid callback, expected a function"),F[e]=F[e]||{},I[e]=Y.split([].slice.call(b.scripts||[{src:"./i"}]).pop().src).dir,t.apply(g,[g,n,r]),g}function y(t,n,r){var i,a,n="string"==typeof n?b.getElementById(n):n,o=V.extend(!0,{xml:G.parseToXML(t),cid:V.guid(),share:{},dir:""},q);return(n=n||b.body||b.cloneNode())?(o.fdr=c(o),o.smr=l(),o.ctr=U(),o.aid=e?V.guid():"",o.api=G.build(o,T),o.xml.nodeType==A&&V.isPlainObject(r)&&(o.xml.getAttribute("id")||o.xml.setAttribute("id",V.guid()),o.cfg[o.xml.getAttribute("id")]=r),o.xml=o.xml.parentNode||x.cloneNode().appendChild(o.xml).parentNode,a=e?b.createDocumentFragment():n,i=h(o,a,o.xml.lastChild),e&&n.appendChild(a),V.extend(G.create(i).api,{theme:o.smr.theme,style:o.smr.style}),i.api):void V.error("invalid parent element")}var x,b,C,w,N,T,A=1,O=10,E=/#(?=([^}])+?{)/gi,L="http://www.w3.org/2000/svg",j="http://www.w3.org/1999/xhtml",M=[a(),s(),,i(),i(),,,,i(),,],P={int:parseInt,float:parseFloat,bool:new Function("v","return v==true || v=='true';")},S={},k={},I={},F={},X={},B={},D={},R={},z=[],$={},q={css:"",cfg:{},opt:{},ali:{},map:{share:"",defer:"",cfgs:{},attrs:{},format:{}},fun:new Function};!function(){for(var e=-1,t=-1,n="animate animateMotion animateTransform circle clipPath cursor defs desc discard ellipse feBlend feColorMatrix feComponentTransfer feComposite feConvolveMatrix feDiffuseLighting feDisplacementMap feDistantLight feDropShadow feFlood feFuncA feFuncB feFuncG feFuncR feGaussianBlur feImage feMerge feMergeNode feMorphology feOffset fePointLight feSpecularLighting feSpotLight feTile feTurbulence filter foreignObject g hatch hatchpath image line linearGradient marker mask mesh meshpatch meshrow metadata mpath path pattern polygon polyline radialGradient rect set solidcolor stop svg switch symbol text textPath tspan unknown use view".split(" "),r="a abbr acronym address applet area article aside audio b base basefont bdi bdo big blockquote body br button canvas caption center cite code col colgroup command datalist dd del details dfn dialog dir div dl dt em embed fieldset figcaption figure font footer form frame frameset h1 h2 h3 h4 h5 h6 head header hr html i iframe img input ins kbd keygen label legend li link main map mark menu menuitem meta meter nav noframes noscript object ol optgroup option output p param pre progress q rp rt rtc ruby s samp script section select small source span strike strong style sub summary sup table tbody td textarea tfoot th thead time title tr track tt u ul var video wbr xmp void".split(" ");r[++t];)k[r[t]]=1;for(;n[++e];)S[n[e]]=k[n[e]]=1}();var V={startup:y,guid:function(){function e(t){var n=String.fromCharCode(97+t%26);return t<26?n:e(Math.floor(t/26)-1)+n}var t=0;return function(){return e(t++)}}(),error:function(e){throw new Error(e)},ready:function(e){var t=/complete|loaded|interactive/;return t.test(b.readyState)&&b.body?e(V):void b.addEventListener("DOMContentLoaded",function(){e(V)},!1)},type:function(){var e,t={},n="Boolean Number String Function Array Date RegExp Object Error".split(" ");for(e=0;e<n.length;e++)t["[object "+n[e]+"]"]=n[e].toLowerCase();return function(e){return null==e?e+"":t[t.toString.call(e)]||"object"}}(),isArray:Array.isArray||function(e){return e instanceof Array},isWindow:function(e){return null!=e&&e==e.window},isFunction:function(e){return"function"==V.type(e)},isNumeric:function(e){var t=V.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},isArraylike:function(e){var t=!!e&&"length"in e&&e.length,n=V.type(e);return"function"!==n&&!V.isWindow(e)&&("array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e)},isPlainObject:function(e){return"object"==V.type(e)&&!V.isWindow(e)&&Object.getPrototypeOf(e)==Object.prototype},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},isInnerObject:function(e){return e&&"function"==typeof e.guid&&!!R[e.guid()]},each:function(e,t){var n,r;if(V.isArraylike(e))for(n=0;n<e.length&&t.call(e[n],n,e[n])!==!1;n++);else for(r in e)if(t.call(e[r],r,e[r])===!1)break;return e},extend:function(){var e,n,r,i,a,o,s=arguments[0]||{},l=1,c=arguments.length,d=!1;for("boolean"==typeof s&&(d=s,s=arguments[l]||{},l++),"object"==typeof s||V.isFunction(s)||(s={}),l===c&&(s=this,l--);l<c;l++)if(null!=(e=arguments[l]))for(n in e)r=s[n],i=e[n],s!==i&&(d&&i&&(V.isPlainObject(i)||(a=V.isArray(i)))?(a?(a=!1,o=r&&V.isArray(r)?r:[]):o=r&&V.isPlainObject(r)?r:{},s[n]=V.extend(d,o,i)):i!==t&&(s[n]=i));return s},expand:function(e){for(var t in e)T[t]&&V.error("the api '"+t+"', already exists");return V.extend(T,e),V.extend(te,e),V.extend(K,e),V.extend(ee,e),this},parseXML:function(e){var n;if(!e||"string"!=typeof e)return null;try{n=(new w).parseFromString(e,"text/xml")}catch(e){n=t}return n&&!n.getElementsByTagName("parsererror").length||V.error("Invalid XML: "+e),n},serialize:function(e){return(new N).serializeToString(e)},hasNamespace:function(e){return!!B[e]},hasComponent:function(e){if("string"!=typeof e)return!1;if(k[e])return!0;var t=Y.split(e);return B[t.dir]&&B[t.dir][t.basename]},clearLibrary:function(e){null==e?(B={},D={}):"string"!=typeof e&&V.error("invalid space, expected a string");var t=new RegExp("^"+e);for(var n in B)n.match(t)&&(delete B[n],delete D[n]);return this},getElementById:function(e){return $[e]||document.getElementById(e)},getElementByGuid:function(e){return R[e]&&R[e].api}},Y=function(){function e(e,t){for(var n=e.length-1,r=0;n>=0;n--){var i=e[n];"."===i?e.splice(n,1):".."===i?(e.splice(n,1),r++):r&&(e.splice(n,1),r--)}if(t)for(;r--;r)e.unshift("..");return e}function t(e){for(var t=0,n=[];t<e.length;t++)e[t]&&n.push(e[t]);return n}function n(e){return"/"===e.charAt(0)}function r(r){var i=n(r),a="/"===r.substr(-1);return r=e(t(r.split("/")),!i).join("/"),r||i||(r="."),r&&a&&(r+="/"),(i?"/":"")+r}function i(e,n){var i=[e,n];return r(t(i).join("/"))}function a(e){var t=e.lastIndexOf("/");return{dir:e.substring(0,t),basename:e.substr(t+1).toLowerCase()}}function o(e,t){var r=e+t;return s[r]?s[r]:"//"==t.substr(0,2)?s[r]=t.substr(2):s[r]=n(t)?i(e.split("/")[0],t.slice(1)):i(e,t)}var s={};return{split:a,fullPath:o}}(),G={parseToXML:function(e){if(null==e&&V.error("invalid input, expected a string a xml node"),e.ownerDocument)return e;if("string"!=typeof e&&V.error("invalid input, expected a string or a xml node"),k[e])return x.createElement(e);if("<"==e.charAt(0))try{return V.parseXML(e).lastChild}catch(e){}var t=e.lastIndexOf("/");try{return x.createElementNS(e.substring(0,t)||".","i:"+e.substr(t+1))}catch(e){}return x.createTextNode(e)},defDisplay:function(){var e={};return function(t){var n,r;return e[t]||(n=b.createElement(t),b.body.appendChild(n),r=getComputedStyle(n,"").getPropertyValue("display"),n.parentNode.removeChild(n),"none"==r&&(r="block"),e[t]=r),e[t]}}(),offset:function(e){var t=e.getBoundingClientRect();return{left:t.left+pageXOffset,top:t.top+pageYOffset}},css:function(e,t){return e.style[t]||getComputedStyle(e,"").getPropertyValue(t)},callback:function(){var e=this.fn.apply(this.data,[].slice.call(arguments));return e==this.data?this.api:e},build:function(){var e=[],t=[];return function(n,r){var i={},a=t.indexOf(r),o=e[a]||t.push(r)&&e[e.push(Object.keys(r))-1];for(a=0;a<o.length;a++)i[o[a]]=G.callback.bind({fn:r[o[a]],data:n,api:i});return i}}(),create:function(e){return e.api||(e.api=e.back=G.build(e,e.typ>1?J:T)),e},elem:function(){return this.ele||R[this.xml.lastChild.uid].elem()},appendTo:function(){if(this.ele)return this.ele;var e=this.fdr.sys[this.map.appendTo];return e&&e.elem()||R[this.xml.lastChild.uid].elem()},createElement:function(){var e={};return function(t,n){var r=t.nodeName;e[r]||(e[r]=b.createElementNS(S[r]?L:k[r]?j:t.namespaceURI,r));var i=e[r].cloneNode();n.appendChild(i);for(var a=0;a<t.attributes.length;a++){var o=t.attributes[a];"id"==o.nodeName||k[r]&&o.prefix||i.setAttribute(o.nodeName,o.nodeValue)}return i}}(),nodeIsMatch:function(e,t,n){var r=C.select(t,e);return[].slice.call(r).indexOf(n)!=-1},xpathQuery:function(e,t){var n=[],r=new XPathEvaluator,i=r.evaluate(e,t,null,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null);if(i)for(var a=0,o=i.snapshotLength;a<o;a++)n.push(i.snapshotItem(a));return n},parseHTML:function e(t){if(t.nodeType==A)if(k[t.nodeName.toLowerCase()])for(var n in t.childNodes)e(t.childNodes[n]);else{var r=V.serialize(t).replace(/(<\/?\w:)((\w|\d)+)/gi,function(e,t,n){return t.toLowerCase()+n}),i=t.getAttribute("id"),a=y(r,t.parentNode);i&&($[i]=a)&&a.attr("id",i),t.parentNode.replaceChild(t.parentNode.lastChild,t)}}};V.extend(G,function(){function e(e){"string"==typeof e.css||V.error("invalid css, expected a string"),"function"==typeof e.fun||V.error("invalid fun, expected a function"),["opt","cfg","map","ali"].forEach(function(t){V.isPlainObject(e[t])||V.error("invalid "+t+" expected a plainObject")}),["format","cfgs","attrs"].forEach(function(t){V.isPlainObject(e.map[t])||V.error("invalid "+t+" in map, expected a plainObject")}),"string"==typeof e.map.defer||V.error("invalid defer in map, expected a string"),"string"==typeof e.map.share||V.error("invalid share in map, expected a string"),"string"==typeof e.xml||"undefined"==typeof e.xml||V.error("invalid xml, expected a undefined value or a string")}function t(e){for(var t in e)if("string"==typeof e[t]){var n,r,i={},a=e[t].split(" ");for(n=0;n<a.length;n++)r=a[n].split("->"),i[r[0]]=r[1]||r[0];e[t]=i}}function n(e){var n,r={},i=e.map;for(n in i.format)P[n]&&(r[n]=e.map.format[n].split(" "));i.format=r,t(i.attrs),t(i.cfgs),i.defer=i.defer?i.defer.split(" "):[],i.share=i.share?i.share.split(" "):[];var a=e.dir.split("/")[0];e.css=e.css.replace(/%@/g,I[a]),e.xml=V.parseXML(e.xml&&e.xml.replace(/%@/g,I[a])||"<void/>")}function r(t,r,i){X[i][r]=t,B[i][r]=t=V.extend(!0,{},q,t),V.release||e(t),B[i][r]||console.warn(i+"/"+r+" already exists"),t.dir=i,t.cid=V.guid(),t.the=t.css.match(/%[-a-z]+/gi)||[],n(t)}function i(e,t){var n=Y.split(Y.fullPath(e,t));return X[n.dir]&&X[n.dir][n.basename]}function a(e,t){var n=Y.fullPath(e,t.namespaceURI||"");return B[n]&&B[n][t.localName.toLowerCase()]}function o(e,t){var n={},r=e.map.extend;return n.xml=e.xml||t.xml,["opt","cfg","map"].forEach(function(i){n[i]="r"==r[i]?e[i]:V.extend({},t[i],e[i])}),"r"!=r.fun&&t.fun?e.fun?n.fun=function(){var n=t.fun.apply(this,[].slice.call(arguments)),r=e.fun.apply(this,[].slice.call(arguments));return r?V.extend(r,n):n}:n.fun=t.fun:n.fun=e.fun,n.css="r"==r.css?e.css:(t.css||"")+(e.css||""),n}return{imports:r,source:i,extend:o,component:a}}());var H=function(){var e=[],t=new Function,n=e.slice,r="every forEach indexOf map pop push shift some splice unshift".split(" ");t.prototype={length:0,slice:function(){for(var e=new H,t=n.apply(this,n.call(arguments)),r=0;r<t.length;r++)e.push(t[r]);return e},hash:function(){for(var e=0,t={};e<this.length;e++)t[this[e]]=this[e];return t},call:function(e){"string"!=typeof e&&V.error("invalid function name, expected a string");for(var t=n.call(arguments).slice(1),r=0;r<this.length;r++)"function"==typeof this[r][e]&&this[r][e].apply(this[r],t);return this},values:function(){for(var e=new H,t=0;t<this.length;t++)e.push(this[t].value());return e}};for(var i=0;i<r.length;i++)t.prototype[r[i]]=e[r[i]];return t}(),U=function(){function e(e,t,n){for(var r=o[e]=o[e]||[],n=V.isNumeric(n)?n:-(1/0),i={source:this,fn:t,priority:n},a=0,s=r.length;a<s;a++)if(n>r[a].priority){r.splice(a,0,i);break}return r.length==s&&r.push(i),this}function n(e,t,n){function r(n){n.currentTarget.unwatch(e,r),t.apply(this,[].slice.call(arguments))}return this.api.watch(e,r,n)}function r(e,n){var i,a;if(e==t)for(i in o)r.apply(this,[i]);else if("function"==typeof e)for(i in o)r.apply(this,[i,e]);else if(n==t){a=[].slice.call(o[e]||[]);for(i in a)a[i].source==this&&o[e].splice(o[e].indexOf(a[i]),1)}else{a=[].slice.call(o[e]||[]);for(i in a)a[i].source==this&&a[i].fn==n&&o[e].splice(o[e].indexOf(a[i]),1)}return this}function i(e,t){if(o[e]){t=null==t?[]:V.isArray(t)?t:[t];for(var n=0;n<o[e].length;n++)o[e][n].fn.apply(this.api,[{type:e,target:this.api,currentTarget:o[e][n].source.api}].concat(t));return this}}function a(e){for(var t in o){var n,r=[];for(n=0;n<o[t].length;n++)o[t][n].source!=e&&r.push(o[t][n]);o[t]=r}}var o={};return{watch:e,glance:n,unwatch:r,notify:i,remove:a}},W=function(){function e(e,n,r){"string"==typeof e||V.error("invalid type, expected a string"),"function"==typeof r||V.error("invalid handler, expected a function"),n==t||"string"==typeof n||V.error("invalid selector, expected a string")}function n(n,r,i){function a(e){if(e.target.xmlTarget){var t=l(e,s);return r?void s.find(r).forEach(function(n){n.contains(t.target)&&i.apply(n,[t].concat(e.data))}):i.apply(s,[t].concat(e.data))}}"function"==typeof r&&(i=r,r=t),e(n,r,i);var o=this.uid,s=this.api;return this.elem().addEventListener(n,a),d[o]=d[o]||{},d[o][n]=d[o][n]||[],d[o][n].push({selector:r,fn:i,handler:a}),this}function r(e,t,n){function r(t){t.currentTarget.off(e,r),i.apply(this,[].slice.call(arguments))}var i;return V.isFunction(n)?(i=n,n=r):V.isFunction(t)?(i=t,t=r):V.error("invalid handler, expected a function"),this.api.on(e,t,n)}function i(e,n,r){var a,o=this.elem(),s=d[this.uid]||{};if(e==t){for(e in s)i.apply(this,[e]);return this}if(!s[e])return this;var l=[].slice.call(s[e]);if("function"==typeof n)for(a in l)n==l[a].fn&&(s[e].splice(s[e].indexOf(l[a]),1),o.removeEventListener(e,l[a].handler));else if(n==t){for(a in l)o.removeEventListener(e,l[a].handler);s[e].splice(0)}else if("function"==typeof r)for(a in l)r==l[a].fn&&n==l[a].selector&&(s[e].splice(s[e].indexOf(l[a]),1),o.removeEventListener(e,l[a].handler));else for(a in l)n==l[a].selector&&(s[e].splice(s[e].indexOf(l[a]),1),o.removeEventListener(e,l[a].handler));return this}function a(e,t,n){var r=s(e,n);return r.xmlTarget=R[this.uid],r.data=null==t?[]:V.isArray(t)?t:[t],this.elem().dispatchEvent(r),this}function o(e){delete d[e.uid]}function s(e,t){var n=t!==!1,r=b.createEvent(p[e]||"Events");return r.initEvent(e,n,!0),r}function l(e,n){var r={originalEvent:e};for(var i in e)u.test(i)||e[i]===t||(r[i]=e[i]);return r.currentTarget=n,r.target=(e.xmlTarget||G.create(e.target.xmlTarget)).api,c(r,e)}function c(e,t){return f.forEach(function(n){var r=t[n];e[n]=function(){return r&&r.apply(t,arguments)}}),e}var d={},u=/^([A-Z]|returnValue$|layer[XY]$|keyLocation$)/,f="preventDefault stopImmediatePropagation stopPropagation".split(" "),p={click:"MouseEvents",mousedown:"MouseEvents",mouseup:"MouseEvents",mousemove:"MouseEvents"};return{on:n,once:r,off:i,trigger:a,remove:o}}(),_={elem:function(){return this.elem()},text:function(e){var n=this.elem();return e===t?n.textContent:(1==n.childNodes.length&&n.lastChild.nodeType?this.node.data=n.lastChild.data=e+"":(this.api.children(0).call("remove"),this.api.append(x.createTextNode(e+""))),this)},prop:function(e,n){return n===t?this.elem()[e]:(this.elem()[e]=n,this)},removeProp:function(e){return delete this.elem()[e],this},attr:function(e,n){var r=this.elem();return"string"!=typeof e&&V.error("invalid attribute name, expected a string"),n===t?r.getAttribute(e):"string"==typeof n?(r.setAttribute(e,n),this):void V.error("invalid attribute value, expected a string")},removeAttr:function(e){return this.elem().removeAttribute(e),this},addClass:function(e){for(var t=this.elem(),n=t.getAttribute("class"),r=e.replace(/#/g,this.env.aid+this.env.cid).split(/\s+/),i=n?n.split(/\s+/):[],a=0;a<r.length;a++)i.indexOf(r[a])<0&&i.push(r[a]);return t.setAttribute("class",i.join(" ")),this},removeClass:function(e){for(var t=this.elem(),n=t.getAttribute("class"),r=e.replace(/#/g,this.env.aid+this.env.cid).split(/\s+/),i=n?n.split(/\s+/):[],a=0;a<r.length;a++){var o=i.indexOf(r[a]);o>=0&&i.splice(o,1)}return t.setAttribute("class",i.join(" ")),this},contains:function(e){if(!e)return!1;var t=this.elem(),n=V.isInnerObject(e)&&e.elem()||e;do{if(n==t)return!0;n=n.parentNode}while(n);return!1},data:function(e,n){return n===t?this.data[e]:(this.data[e]=n,this)},removeData:function(e){return delete this.data[e],this},notify:function(e,t){return this.ctr.notify.apply(this,[e,t])},watch:function(e,t,n){return"function"!=typeof t&&V.error("invalid callback, expected a function"),this.ctr.watch.apply(this,[e,t,n])},glance:function(e,t,n){return"function"!=typeof t&&V.error("invalid callback, expected a function"),this.ctr.glance.apply(this,[e,t,n])},unwatch:function(e,t){return this.ctr.unwatch.apply(this,[e,t])},append:function(e,t){var n=this.appendTo();if(V.isInnerObject(e)){e.contains(this.api)&&V.error("attempt to append a target which contains current");var r=R[e.guid()],i=r.env,a=r.elem().parentNode,o=i.xml.lastChild==r.node;return n.appendChild(r.elem()),this.node.appendChild(r.node),M[r.typ].chenv(this.env,r),o&&(i.xml.appendChild(x.createElement("void")),h(i,a,i.xml.lastChild)),i.fdr.refresh(),this.env.fdr.refresh(),e}return e=G.parseToXML(e),e.nodeType==A&&V.isPlainObject(t)&&(e.getAttribute("id")||e.setAttribute("id",V.guid()),this.env.cfg[e.getAttribute("id")]=t),this.node.appendChild(e),h(this.env,n,this.node.lastChild),e.nodeType==A&&e.hasAttribute("id")&&this.env.fdr.refresh(),G.create(R[this.node.lastChild.uid]).api},before:function(e,t){this.node==this.env.xml.lastChild&&V.error("insert before document node is not allow");var n=this.elem();if(V.isInnerObject(e)){e.contains(this.api)&&V.error("attempt to insert a target which contains current");var r=R[e.guid()],i=r.env,a=r.elem().parentNode,o=i.xml.lastChild==r.node;return this.node.parentNode.insertBefore(r.node,this.node),n.parentNode.insertBefore(r.elem(),n),M[r.typ].chenv(this.env,r),o&&(i.xml.appendChild(x.createElement("void")),h(i,a,i.xml.lastChild)),i.fdr.refresh(),this.env.fdr.refresh(),e}e=G.parseToXML(e),e.nodeType==A&&V.isPlainObject(t)&&(e.getAttribute("id")||e.setAttribute("id",V.guid()),this.env.cfg[e.getAttribute("id")]=t);var s=this.node.parentNode.insertBefore(e,this.node);return h(this.env,n,s),n.parentNode.insertBefore(n.lastChild,n),e.nodeType==A&&e.hasAttribute("id")&&this.env.fdr.refresh(),G.create(R[this.node.previousSibling.uid]).api},replace:function(e,t){var n=this.elem();if(V.isInnerObject(e)){e.contains(this.api)&&V.error("attempt to replace a target which contains current");var r=R[e.guid()],i=r.env,a=r.elem().parentNode,o=i.xml.lastChild==r.node;return n.parentNode.replaceChild(r.elem(),n),this.node.parentNode.replaceChild(r.node,this.node),this.node=r.node,M[r.typ].chenv(this.env,r),o&&(i.xml.appendChild(x.createElement("void")),h(i,a,i.xml.lastChild)),i.fdr.refresh(),this.env.fdr.refresh(),M[this.typ].recycle(this),e}return e=G.parseToXML(e),e.nodeType==A&&V.isPlainObject(t)&&(e.getAttribute("id")||e.setAttribute("id",V.guid()),this.env.cfg[e.getAttribute("id")]=t),this.node.appendChild(e),h(this.env,n,e),this.node.parentNode.replaceChild(e,this.node),n.parentNode.replaceChild(n.lastChild,n),e.nodeType==A&&e.hasAttribute("id")&&this.env.fdr.refresh(),M[this.typ].recycle(this),G.create(R[e.uid]).api},remove:function(){if(this.env.xml.lastChild==this.node)this.api.replace("void");else{var e=this.elem();e.parentNode.removeChild(e),this.node.parentNode.removeChild(this.node),this.node.nodeType==A&&this.node.hasAttribute("id")&&this.env.fdr.refresh(),M[this.typ].recycle(this)}return this},find:function(e){return this.env.fdr.sys(e,this.api)},get:function(e,t){for(var t=t||A,n=this.node.firstChild,r=-1;n&&(n.nodeType!=t||++r!=e);)n=n.nextSibling;return n&&G.create(R[n.uid]).api},first:function(e){for(var e=e||A,t=this.node.firstChild;t&&t.nodeType!=e;)t=t.nextSibling;return t&&G.create(R[t.uid]).api},last:function(e){for(var e=e||A,t=this.node.lastChild;t&&t.nodeType!=e;)t=t.previousSibling;return t&&G.create(R[t.uid]).api},prev:function(e){for(var e=e||A,t=this.node.previousSibling;t;){if(t.nodeType==e)return G.create(R[t.uid]).api;t=t.previousSibling}},next:function(e){for(var e=e||A,t=this.node.nextSibling;t;){if(t.nodeType==e)return G.create(R[t.uid]).api;t=t.nextSibling}},children:function(e){e==t&&(e=A);for(var n=new H,r=this.node.firstChild;r;)r.nodeType!=e&&0!=e||n.push(G.create(R[r.uid]).api),r=r.nextSibling;return n},value:function(){return this.value},localName:function(){return this.node.localName},namespace:function(){var e=this.node.namespaceURI;return k[this.node.nodeName]?e:Y.fullPath(this.env.dir,e||"")},guid:function(){return this.node.uid},toString:function(){return this.node.getAttribute("id")||this.node.uid},serialize:function(e){var t=e?this.node:this.elem(),n=t.previousSibling;return n&&n.nodeType==O&&(t=t.ownerDocument),V.serialize(t)}},Q={css:function(e,n){var r=this.elem();if("string"!=typeof e&&V.error("invalid style name, expected a string"),n==t){var e=e.replace(/([A-Z])/g,"-$1").toLowerCase();return r.style[e]||getComputedStyle(r,"").getPropertyValue(e)}return"number"==typeof n&&(n+=""),r.style[e]=n,this},show:function(){var e=this.elem(),t=e.style;return"none"==t.display&&(t.display=""),"none"==getComputedStyle(e,"").display&&(t.display=G.defDisplay(e.nodeName)),this},hide:function(){return this.elem().style.display="none",this},width:function(e){var n=this.elem();return e===t?n.getBoundingClientRect().width:(n.style.width=parseFloat(e)+"px",this)},height:function(e){var n=this.elem();return e===t?n.getBoundingClientRect().height:(n.style.height=parseFloat(e)+"px",this)},offsetParent:function(){for(var e=this.elem().offsetParent;e&&"static"==G.css(e,"position");)e=e.offsetParent;return e||b.documentElement},offset:function(e){var t=this.elem();if(e){var n=this.api.offsetParent();return t.style.top=e.top-n.top+"px",t.style.left=e.left-n.left+"px",this}var r=t.getBoundingClientRect();return{left:r.left+pageXOffset,top:r.top+pageYOffset,width:Math.round(r.width),height:Math.round(r.height)}},position:function(){var e=this.elem(),t=G.offset(e),n=this.api.offsetParent(),r=G.offset(n);return t.top-=parseFloat(G.css(e,"margin-top")),t.left-=parseFloat(G.css(e,"margin-left")),r.top+=parseFloat(G.css(n,"border-top-width")),r.left+=parseFloat(G.css(n,"border-left-width")),{top:t.top-r.top,left:t.left-r.left}},scrollTop:function(e){var n=this.elem(),r="scrollTop"in n;return e===t?r?n.scrollTop:n.pageYOffset:(r?n.scrollTop=e:n.scrollTo(n.scrollX,e),this)},scrollLeft:function(e){var n=this.elem(),r="scrollLeft"in n;return e===t?r?n.scrollLeft:n.pageXOffset:(r?n.scrollLeft=e:n.scrollTo(e,n.scrollY),this)}},Z={css:function(e,n){"string"!=typeof e&&V.error("invalid style name, expected a string");for(var r={},i=this.elem(),a=i.getAttribute("style")||"",o=/(.+?):(.+?);/gi;o.test(a);)r[RegExp.$1]=RegExp.$2;if(n==t)return r[e];null==n?delete r[e]:r[e]=n;var s=[];for(var l in r)s.push(l,":",r[l],";");return i.setAttribute("style",s.join("")),this}},J=function(){var e={};return["before","replace","prev","next","guid","toString"].forEach(function(t){e[t]=_[t]}),e.text=function(e){return e==t?this.ele.textContent:(this.ele.textContent=e,this)},e.remove=function(){return this.ele.parentNode.removeChild(this.ele),this.node.parentNode.removeChild(this.node),M[this.typ].recycle(this),this},e}(),K={show:function(){var e=this.node.defer;return e.loaded&&V.error("the node has been loaded"),e.loaded=!0,this.api.replace(e)}},ee={remove:function(){var e=this.dir+"/"+this.node.localName;this.env.share[e].copys.forEach(function(e){e.api.remove()}),delete this.env.share[e],_.remove.apply(this)}},te={remove:function(){var e=this.dir+"/"+this.node.localName,t=this.env.share[e];_.remove.apply(this),t.copys.splice(t.copys.indexOf(this),1)}},ne=function(){var e=[,,,"TextNode","CDATASection",,,,"Comment"];return function(t,n){var r={uid:V.guid()};return r.typ=t.nodeType,r.ele=b["create"+e[r.typ]](t.nodeValue),r}}();!function(){e?(C=window.xpath||{select:G.xpathQuery},w=DOMParser,N=XMLSerializer,b=document,x=V.parseXML("<void/>"),T=V.extend(Q,W,_),window.xmlplus=V.extend(g,V),"function"==typeof define&&define.amd&&define("xmlplus",[],new Function("return xmlplus;")),V.ready(function(){b.body.hasAttribute("noparse")||G.parseHTML(b.body)})):(delete V.ready,delete V.getElementById,C=require("xpath"),w=require("xmldom").DOMParser,N=require("xmldom").XMLSerializer,x=b=V.parseXML("<void/>"),T=V.extend(Z,W,_),module.exports=V.extend(g,V)),te=V.extend({},T,te),K=V.extend({},T,K),ee=V.extend({},T,ee)}()}("undefined"!=typeof navigator&&navigator.userAgent);